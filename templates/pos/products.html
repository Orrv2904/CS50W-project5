{% extends 'pos/layout.html' %}
{% load static %}
{% block content %}

<!-- partial -->
{% block navbar %}
{% include "pos/nav.html" %}
{% endblock %}

<div class="content">
  <form action="{% url 'product' %}" method="post" enctype="multipart/form-data">
    <h1 class="text-center my-4">Product Order</h1>

    <div class="form-group container">
      <label class="mt-3 fw-bold fs-5" for="productdetailid">Product:</label>
      <input name="producto" placeholder="Type the product name" type="text" class="form-control mt-2" id="producto" aria-describedby="emailHelp">
    </div>

    <div class="form-group container">
      <label class="mt-3 fw-bold fs-5" for="presentacionid">Presentation:</label>
      <select class="form-select mt-2" id="presentacionid" aria-label="Select the type of presentation">
        <option selected id="presentselect">Select the type of presentation</option>
        {% for p in presentation %}
        <option id="presentname" value="{{ p.id }}">{{ p.name }}</option>
         {% endfor %}
      </select>
    </div>

    <div class="form-group container mb-4">
      <label class="mt-3 fw-bold fs-5" for="sizepro">Size:</label>
      <select class="form-select mt-2" id="sizepro" aria-label="Select size">
        <option selected id="sizeselect">Select an option</option>
        {% for s in size %}
        <option id="sizename" value="{{ s.id }}">{{ s.size }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group container">
      <label class="mt-3 fw-bold fs-5" for="descriptionpro">Description:</label>
      <textarea class="form-control mt-2" id="descriptionpro" aria-describedby="emailHelp"></textarea>

    </div>

    <div class="form-group container">
      <label class="mt-3 fw-bold fs-5" for="uniqueprice">Price:</label>
      <input type="number" class="form-control mt-2" id="uniqueprice" aria-describedby="emailHelp">
    </div>

    <div class="d-flex justify-content-center mt-5 mb-5">
      <button id="almacenar_compra" class="btn btn-primary" type="button">Add Products</button>
    </div>
  </form>

  <hr>

  <div class="mt-5">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Product</th>
          <th scope="col">Presentation</th>
          <th scope="col">Size</th>
          <th scope="col">Description</th>
          <th scope="col">Price</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody id="producttable">
      </tbody>
    </table>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', (event) => {
      let rowCount = 0;

      document.getElementById('almacenar_compra').addEventListener('click', () => {
          // Obtenemos los elementos del formulario
          const producto = document.getElementById('producto').value;
          const presentacionid = document.getElementById('presentacionid').value;
          const descriptionpro = document.getElementById('descriptionpro').value;
          const uniqueprice = document.getElementById('uniqueprice').value;

          // Incrementamos el contador de filas
          rowCount++;

          // Creamos una nueva fila
          const newRow = document.createElement('tr');

          // Creamos y añadimos las celdas a la fila
          newRow.innerHTML = `
              <th scope="row">${rowCount}</th>
              <td>${producto}</td>
              <td>${presentacionid}</td>
              <td>${descriptionpro}</td>
              <td>${uniqueprice}</td>
          `;

          // Añadimos la nueva fila al cuerpo de la tabla
          document.getElementById('producttable').appendChild(newRow);
      });
  });
</script>

{% endblock %}